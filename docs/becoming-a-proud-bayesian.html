<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Becoming a proud Bayesian | 454 Bayesian Statistics Project - College Ranking</title>
  <meta name="description" content="Chapter 9 Becoming a proud Bayesian | 454 Bayesian Statistics Project - College Ranking" />
  <meta name="generator" content="bookdown  and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Becoming a proud Bayesian | 454 Bayesian Statistics Project - College Ranking" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="zuofuhuang/CollegeRanking" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Becoming a proud Bayesian | 454 Bayesian Statistics Project - College Ranking" />
  
  
  

<meta name="author" content="Zuofu Huang and Kavya Shetty, Spring 2019 Macalester College" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bayes-model-part-2.html">
<link rel="next" href="a-little-shiny.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="motivation.html"><a href="motivation.html"><i class="fa fa-check"></i><b>2</b> Motivation</a><ul>
<li class="chapter" data-level="2.1" data-path="motivation.html"><a href="motivation.html#why-this"><i class="fa fa-check"></i><b>2.1</b> Why this?</a></li>
<li class="chapter" data-level="2.2" data-path="motivation.html"><a href="motivation.html#a-snapshot"><i class="fa fa-check"></i><b>2.2</b> A snapshot</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-source.html"><a href="data-source.html"><i class="fa fa-check"></i><b>3</b> Data source</a><ul>
<li class="chapter" data-level="3.1" data-path="data-source.html"><a href="data-source.html#data-that-makes-our-work-possible"><i class="fa fa-check"></i><b>3.1</b> Data that makes our work possible</a></li>
<li class="chapter" data-level="3.2" data-path="data-source.html"><a href="data-source.html#our-data-dictionary"><i class="fa fa-check"></i><b>3.2</b> Our data dictionary</a></li>
<li class="chapter" data-level="3.3" data-path="data-source.html"><a href="data-source.html#changes-to-datasets"><i class="fa fa-check"></i><b>3.3</b> Changes to datasets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>4</b> Data cleaning</a><ul>
<li class="chapter" data-level="4.1" data-path="data-cleaning.html"><a href="data-cleaning.html#what-did-we-do"><i class="fa fa-check"></i><b>4.1</b> What <strong>did</strong> we do?</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-cleaning.html"><a href="data-cleaning.html#load-data-select-and-rename-columns"><i class="fa fa-check"></i><b>4.1.1</b> Load data, select and rename columns</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-cleaning.html"><a href="data-cleaning.html#filter-schools-that-have-a-rank"><i class="fa fa-check"></i><b>4.1.2</b> Filter schools that have a rank</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-cleaning.html"><a href="data-cleaning.html#join-datasets"><i class="fa fa-check"></i><b>4.1.3</b> Join datasets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5</b> Visualization</a><ul>
<li class="chapter" data-level="5.1" data-path="visualization.html"><a href="visualization.html#st-2nd-peeks"><i class="fa fa-check"></i><b>5.1</b> 1st &amp; 2nd Peeks</a></li>
<li class="chapter" data-level="5.2" data-path="visualization.html"><a href="visualization.html#rd-peek"><i class="fa fa-check"></i><b>5.2</b> 3rd Peek</a></li>
<li class="chapter" data-level="5.3" data-path="visualization.html"><a href="visualization.html#th-peek"><i class="fa fa-check"></i><b>5.3</b> 4th Peek</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html"><i class="fa fa-check"></i><b>6</b> Bayesian Models Part 1.1 University</a><ul>
<li class="chapter" data-level="6.1" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#model-0"><i class="fa fa-check"></i><b>6.1</b> Model 0</a><ul>
<li class="chapter" data-level="6.1.1" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#first-impression"><i class="fa fa-check"></i><b>6.1.1</b> First Impression</a></li>
<li class="chapter" data-level="6.1.2" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#building-the-model"><i class="fa fa-check"></i><b>6.1.2</b> Building the model</a></li>
<li class="chapter" data-level="6.1.3" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#model-summary"><i class="fa fa-check"></i><b>6.1.3</b> Model summary</a></li>
<li class="chapter" data-level="6.1.4" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#posterior-inference"><i class="fa fa-check"></i><b>6.1.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#model-1"><i class="fa fa-check"></i><b>6.2</b> Model 1</a><ul>
<li class="chapter" data-level="6.2.1" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#first-impression-1"><i class="fa fa-check"></i><b>6.2.1</b> First Impression</a></li>
<li class="chapter" data-level="6.2.2" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#building-the-model-1"><i class="fa fa-check"></i><b>6.2.2</b> Building the model</a></li>
<li class="chapter" data-level="6.2.3" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#model-summary-1"><i class="fa fa-check"></i><b>6.2.3</b> Model summary</a></li>
<li class="chapter" data-level="6.2.4" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#posterior-inference-1"><i class="fa fa-check"></i><b>6.2.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#model-2"><i class="fa fa-check"></i><b>6.3</b> Model 2</a><ul>
<li class="chapter" data-level="6.3.1" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#first-impression-2"><i class="fa fa-check"></i><b>6.3.1</b> First Impression</a></li>
<li class="chapter" data-level="6.3.2" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#building-the-model-2"><i class="fa fa-check"></i><b>6.3.2</b> Building the model</a></li>
<li class="chapter" data-level="6.3.3" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#model-summary-2"><i class="fa fa-check"></i><b>6.3.3</b> Model summary</a></li>
<li class="chapter" data-level="6.3.4" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#posterior-inference-2"><i class="fa fa-check"></i><b>6.3.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="bayesian-models-part-1-1-university.html"><a href="bayesian-models-part-1-1-university.html#future-steps"><i class="fa fa-check"></i><b>6.4</b> Future steps</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html"><i class="fa fa-check"></i><b>7</b> Bayesian Models Part 1.2 Liberal Arts</a><ul>
<li class="chapter" data-level="7.1" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#model-0-1"><i class="fa fa-check"></i><b>7.1</b> Model 0</a><ul>
<li class="chapter" data-level="7.1.1" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#first-impression-3"><i class="fa fa-check"></i><b>7.1.1</b> First Impression</a></li>
<li class="chapter" data-level="7.1.2" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#building-the-model-3"><i class="fa fa-check"></i><b>7.1.2</b> Building the model</a></li>
<li class="chapter" data-level="7.1.3" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#model-summary-3"><i class="fa fa-check"></i><b>7.1.3</b> Model summary</a></li>
<li class="chapter" data-level="7.1.4" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#posterior-inference-3"><i class="fa fa-check"></i><b>7.1.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#model-1-1"><i class="fa fa-check"></i><b>7.2</b> Model 1</a></li>
<li class="chapter" data-level="7.3" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#model-2-1"><i class="fa fa-check"></i><b>7.3</b> Model 2</a><ul>
<li class="chapter" data-level="7.3.1" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#first-impression-4"><i class="fa fa-check"></i><b>7.3.1</b> First Impression</a></li>
<li class="chapter" data-level="7.3.2" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#building-the-model-4"><i class="fa fa-check"></i><b>7.3.2</b> Building the model</a></li>
<li class="chapter" data-level="7.3.3" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#model-summary-4"><i class="fa fa-check"></i><b>7.3.3</b> Model summary</a></li>
<li class="chapter" data-level="7.3.4" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#posterior-inference-4"><i class="fa fa-check"></i><b>7.3.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="bayesian-models-part-1-2-liberal-arts.html"><a href="bayesian-models-part-1-2-liberal-arts.html#future-steps-1"><i class="fa fa-check"></i><b>7.4</b> Future steps</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bayes-model-part-2.html"><a href="bayes-model-part-2.html"><i class="fa fa-check"></i><b>8</b> Bayes Model Part 2</a><ul>
<li class="chapter" data-level="8.1" data-path="bayes-model-part-2.html"><a href="bayes-model-part-2.html#possible-data-cleaning-unexpected"><i class="fa fa-check"></i><b>8.1</b> Possible data cleaning (Unexpected)</a></li>
<li class="chapter" data-level="8.2" data-path="bayes-model-part-2.html"><a href="bayes-model-part-2.html#on-the-way-to-final-model"><i class="fa fa-check"></i><b>8.2</b> On the way to Final Model</a></li>
<li class="chapter" data-level="8.3" data-path="bayes-model-part-2.html"><a href="bayes-model-part-2.html#what-are-we-thinking"><i class="fa fa-check"></i><b>8.3</b> What are we thinking?</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html"><i class="fa fa-check"></i><b>9</b> Becoming a proud Bayesian</a><ul>
<li class="chapter" data-level="9.1" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#university-model"><i class="fa fa-check"></i><b>9.1</b> University Model</a><ul>
<li class="chapter" data-level="9.1.1" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#get-some-intuition"><i class="fa fa-check"></i><b>9.1.1</b> Get some intuition</a></li>
<li class="chapter" data-level="9.1.2" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#building-the-model-5"><i class="fa fa-check"></i><b>9.1.2</b> Building the model</a></li>
<li class="chapter" data-level="9.1.3" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#model-summary-5"><i class="fa fa-check"></i><b>9.1.3</b> Model summary</a></li>
<li class="chapter" data-level="9.1.4" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#posterior-inference-5"><i class="fa fa-check"></i><b>9.1.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#liberal-arts-colleges"><i class="fa fa-check"></i><b>9.2</b> Liberal Arts Colleges</a><ul>
<li class="chapter" data-level="9.2.1" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#get-some-more-intuition"><i class="fa fa-check"></i><b>9.2.1</b> Get some more intuition</a></li>
<li class="chapter" data-level="9.2.2" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#building-the-model-6"><i class="fa fa-check"></i><b>9.2.2</b> Building the model</a></li>
<li class="chapter" data-level="9.2.3" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#model-summary-6"><i class="fa fa-check"></i><b>9.2.3</b> Model summary</a></li>
<li class="chapter" data-level="9.2.4" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#posterior-inference-6"><i class="fa fa-check"></i><b>9.2.4</b> Posterior inference</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="becoming-a-proud-bayesian.html"><a href="becoming-a-proud-bayesian.html#comparison"><i class="fa fa-check"></i><b>9.3</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="a-little-shiny.html"><a href="a-little-shiny.html"><i class="fa fa-check"></i><b>10</b> A Little Shiny</a><ul>
<li class="chapter" data-level="10.1" data-path="a-little-shiny.html"><a href="a-little-shiny.html#shiny-app"><i class="fa fa-check"></i><b>10.1</b> Shiny App</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="keep-shining.html"><a href="keep-shining.html"><i class="fa fa-check"></i><b>11</b> Keep Shining</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">454 Bayesian Statistics Project - College Ranking</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="becoming-a-proud-bayesian" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Becoming a proud Bayesian</h1>
<p>For our finalized Bayesian model, we intend to build predictive models for universities and liberal arts colleges. Then we’ll compare the similarities and differences of the two models. (i.e. is some factor important for universities and less so for liberal arts colleges?)</p>
<div id="university-model" class="section level2">
<h2><span class="header-section-number">9.1</span> University Model</h2>
<div id="get-some-intuition" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Get some intuition</h3>
<p>To reasonably set our priors, we received some intuition from a frequentist linear model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">lm</span>(fullUniversity<span class="op">$</span>Y2018 <span class="op">~</span><span class="st"> </span>fullUniversity<span class="op">$</span>UGDS_<span class="dv">1617</span> <span class="op">+</span><span class="st"> </span>fullUniversity<span class="op">$</span>LOCALE_collapse <span class="op">+</span><span class="st"> </span>fullUniversity<span class="op">$</span>SAT_AVG_<span class="dv">1617</span> <span class="op">+</span><span class="st"> </span>fullUniversity<span class="op">$</span>ADM_RATE_<span class="dv">1617</span>))</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = fullUniversity$Y2018 ~ fullUniversity$UGDS_1617 + 
##     fullUniversity$LOCALE_collapse + fullUniversity$SAT_AVG_1617 + 
##     fullUniversity$ADM_RATE_1617)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -88.962  -7.240  -1.648   8.813  41.796 
## 
## Coefficients:
##                                        Estimate Std. Error t value
## (Intercept)                           1.984e+02  4.335e+01   4.577
## fullUniversity$UGDS_1617             -5.654e-04  1.565e-04  -3.613
## fullUniversity$LOCALE_collapseSuburb -2.239e+00  3.820e+00  -0.586
## fullUniversity$LOCALE_collapseTown    6.972e+00  8.727e+00   0.799
## fullUniversity$SAT_AVG_1617          -1.290e-01  2.882e-02  -4.478
## fullUniversity$ADM_RATE_1617          8.916e+01  1.433e+01   6.221
##                                      Pr(&gt;|t|)    
## (Intercept)                          1.27e-05 ***
## fullUniversity$UGDS_1617             0.000462 ***
## fullUniversity$LOCALE_collapseSuburb 0.558965    
## fullUniversity$LOCALE_collapseTown   0.426093    
## fullUniversity$SAT_AVG_1617          1.87e-05 ***
## fullUniversity$ADM_RATE_1617         9.58e-09 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 16.51 on 108 degrees of freedom
##   (6 observations deleted due to missingness)
## Multiple R-squared:  0.8129, Adjusted R-squared:  0.8042 
## F-statistic: 93.85 on 5 and 108 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="building-the-model-5" class="section level3">
<h3><span class="header-section-number">9.1.2</span> Building the model</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">university_model_<span class="dv">3</span> &lt;-<span class="st"> &quot;model{  </span>
<span class="st">    # Data: observations</span>
<span class="st">    for(i in 1:length(y)) {</span>
<span class="st">        y[i] ~ dpois(beta0 + beta1*x1[i] + beta2[z[i]] + beta3*x3[i] + beta4*x4[i])</span>
<span class="st">    }</span>
<span class="st">        # Data: subjects</span>
<span class="st">        beta0 ~ dnorm(200, 0.01)</span>
<span class="st">        beta1 ~ dnorm(0, 100)</span>
<span class="st">        beta2[1] &lt;- 0 </span>
<span class="st">        beta2[2] ~ dnorm(-2, 10)</span>
<span class="st">        beta2[3] ~ dnorm(7, 10)</span>
<span class="st">        beta3 ~ dnorm(0, 10)</span>
<span class="st">        beta4 ~ dnorm(90, 10)</span>

<span class="st">}&quot;</span>

<span class="co"># COMPILE</span>

y &lt;-<span class="st"> </span>fullUniversity<span class="op">$</span>Y2018

model_data9 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(y, <span class="dt">x1 =</span> fullUniversity<span class="op">$</span>UGDS_<span class="dv">1617</span>, <span class="dt">z =</span> fullUniversity<span class="op">$</span>LOCALE_collapse, <span class="dt">x3 =</span> fullUniversity<span class="op">$</span>SAT_AVG_<span class="dv">1617</span>, <span class="dt">x4 =</span> fullUniversity<span class="op">$</span>ADM_RATE_<span class="dv">1617</span>))

model_data9 &lt;-<span class="st"> </span><span class="kw">na.omit</span>(model_data9)

university_jags_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">jags.model</span>(<span class="kw">textConnection</span>(university_model_<span class="dv">3</span>), 
    <span class="dt">data =</span> <span class="kw">list</span>(<span class="dt">y =</span> model_data9<span class="op">$</span>y, <span class="dt">x1 =</span> model_data9<span class="op">$</span>x1, <span class="dt">z =</span> <span class="kw">factor</span>(model_data9<span class="op">$</span>z), <span class="dt">x3 =</span> model_data9<span class="op">$</span>x3, <span class="dt">x4 =</span> model_data9<span class="op">$</span>x4),
    <span class="dt">inits=</span><span class="kw">list</span>(<span class="dt">.RNG.name =</span> <span class="st">&quot;base::Wichmann-Hill&quot;</span>, <span class="dt">.RNG.seed =</span> <span class="dv">454</span>))</code></pre></div>
<pre><code>## Compiling model graph
##    Resolving undeclared variables
##    Allocating nodes
## Graph information:
##    Observed stochastic nodes: 114
##    Unobserved stochastic nodes: 6
##    Total graph size: 1026
## 
## Initializing model</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># SIMULATE the model</span>
university_sim_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">coda.samples</span>(university_jags_<span class="dv">3</span>,
    <span class="dt">variable.names =</span> <span class="kw">c</span>(<span class="st">&quot;beta0&quot;</span>,<span class="st">&quot;beta1&quot;</span>,<span class="st">&quot;beta2&quot;</span>,<span class="st">&quot;beta3&quot;</span>,<span class="st">&quot;beta4&quot;</span>),
    <span class="dt">n.iter =</span> <span class="dv">10000</span>)

<span class="co"># STORE the chains in a data frame</span>
university_chains_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(university_sim_<span class="dv">3</span>[[<span class="dv">1</span>]])</code></pre></div>
</div>
<div id="model-summary-5" class="section level3">
<h3><span class="header-section-number">9.1.3</span> Model summary</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(university_sim_<span class="dv">3</span>)</code></pre></div>
<pre><code>## 
## Iterations = 1001:11000
## Thinning interval = 1 
## Number of chains = 1 
## Sample size per chain = 10000 
## 
## 1. Empirical mean and standard deviation for each variable,
##    plus standard error of the mean:
## 
##                Mean       SD  Naive SE Time-series SE
## beta0     2.036e+02 6.583879 6.584e-02      1.532e+00
## beta1    -5.895e-04 0.000056 5.600e-07      5.329e-06
## beta2[1]  0.000e+00 0.000000 0.000e+00      0.000e+00
## beta2[2] -2.028e+00 0.305539 3.055e-03      3.829e-03
## beta2[3]  6.954e+00 0.315463 3.155e-03      3.933e-03
## beta3    -1.332e-01 0.004354 4.354e-05      1.013e-03
## beta4     9.002e+01 0.313147 3.131e-03      4.069e-03
## 
## 2. Quantiles for each variable:
## 
##                2.5%        25%        50%        75%      97.5%
## beta0     1.918e+02 198.745158  2.036e+02  2.084e+02  2.174e+02
## beta1    -6.984e-04  -0.000628 -5.893e-04 -5.513e-04 -4.804e-04
## beta2[1]  0.000e+00   0.000000  0.000e+00  0.000e+00  0.000e+00
## beta2[2] -2.630e+00  -2.232765 -2.030e+00 -1.823e+00 -1.427e+00
## beta2[3]  6.338e+00   6.744065  6.955e+00  7.170e+00  7.571e+00
## beta3    -1.422e-01  -0.136347 -1.332e-01 -1.300e-01 -1.254e-01
## beta4     8.941e+01  89.801851  9.002e+01  9.023e+01  9.063e+01</code></pre>
</div>
<div id="posterior-inference-5" class="section level3">
<h3><span class="header-section-number">9.1.4</span> Posterior inference</h3>
<p>For an unknown university located in the city with 10000 undergraduates, student mean SAT score of 1550 and an admission rate of <span class="math inline">\(23\%\)</span> (e.g. Gvictor University), we could predict its ranking from our rjags simulation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">university_chains_<span class="dv">3</span> &lt;-<span class="st"> </span>university_chains_<span class="dv">3</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ranking_new =</span> <span class="kw">rpois</span>(<span class="dv">10000</span>, <span class="dt">lambda =</span> (beta0 <span class="op">+</span><span class="st"> </span>beta1 <span class="op">*</span><span class="st"> </span><span class="dv">10000</span> <span class="op">+</span><span class="st"> </span>beta3 <span class="op">*</span><span class="st"> </span><span class="dv">1550</span> <span class="op">+</span><span class="st"> </span>beta4 <span class="op">*</span><span class="st"> </span><span class="fl">0.23</span>)))

university_chains_<span class="dv">3</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="kw">quantile</span>(ranking_new,<span class="fl">0.025</span>),<span class="kw">quantile</span>(ranking_new,<span class="fl">0.975</span>))</code></pre></div>
<pre><code>##   quantile(ranking_new, 0.025) quantile(ranking_new, 0.975)
## 1                            6                           19</code></pre>
<p>This is <strong>totally reasonable</strong> and <strong>fantastic</strong>! The interval truly reflects the intuitive estimate of Gvictor University’s ranking.</p>
</div>
</div>
<div id="liberal-arts-colleges" class="section level2">
<h2><span class="header-section-number">9.2</span> Liberal Arts Colleges</h2>
<div id="get-some-more-intuition" class="section level3">
<h3><span class="header-section-number">9.2.1</span> Get some more intuition</h3>
<p>Similar to what we do with universities, we get some intuition for our liberal arts college model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">lm</span>(full_LiberalArts<span class="op">$</span>Y2018 <span class="op">~</span><span class="st"> </span>full_LiberalArts<span class="op">$</span>UGDS_<span class="dv">1617</span> <span class="op">+</span><span class="st"> </span>full_LiberalArts<span class="op">$</span>LOCALE_collapse_lac1 <span class="op">+</span><span class="st"> </span>full_LiberalArts<span class="op">$</span>SAT_AVG_<span class="dv">1617</span> <span class="op">+</span><span class="st"> </span>full_LiberalArts<span class="op">$</span>ADM_RATE_<span class="dv">1617</span>))</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = full_LiberalArts$Y2018 ~ full_LiberalArts$UGDS_1617 + 
##     full_LiberalArts$LOCALE_collapse_lac1 + full_LiberalArts$SAT_AVG_1617 + 
##     full_LiberalArts$ADM_RATE_1617)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -54.344 -11.631   1.071  11.237  52.925 
## 
## Coefficients:
##                                               Estimate Std. Error t value
## (Intercept)                                 441.328186  35.323942  12.494
## full_LiberalArts$UGDS_1617                   -0.003645   0.003053  -1.194
## full_LiberalArts$LOCALE_collapse_lac1Suburb  -3.997605   4.991925  -0.801
## full_LiberalArts$LOCALE_collapse_lac1Town    -9.693224   4.937122  -1.963
## full_LiberalArts$LOCALE_collapse_lac1Rural  -14.612267   9.744260  -1.500
## full_LiberalArts$SAT_AVG_1617                -0.303384   0.024504 -12.381
## full_LiberalArts$ADM_RATE_1617               36.512244  13.966752   2.614
##                                             Pr(&gt;|t|)    
## (Intercept)                                   &lt;2e-16 ***
## full_LiberalArts$UGDS_1617                    0.2355    
## full_LiberalArts$LOCALE_collapse_lac1Suburb   0.4253    
## full_LiberalArts$LOCALE_collapse_lac1Town     0.0526 .  
## full_LiberalArts$LOCALE_collapse_lac1Rural    0.1371    
## full_LiberalArts$SAT_AVG_1617                 &lt;2e-16 ***
## full_LiberalArts$ADM_RATE_1617                0.0104 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 19.26 on 94 degrees of freedom
##   (48 observations deleted due to missingness)
## Multiple R-squared:  0.8665, Adjusted R-squared:  0.8579 
## F-statistic: 101.7 on 6 and 94 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="building-the-model-6" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Building the model</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">liberal_model_<span class="dv">3</span> &lt;-<span class="st"> &quot;model{  </span>
<span class="st">    # Data: observations</span>
<span class="st">    for(i in 1:length(y)) {</span>
<span class="st">        y[i] ~ dpois(beta0 + beta1*x1[i] + beta2[z[i]] + beta3*x3[i] + beta4*x4[i])</span>
<span class="st">    }</span>
<span class="st">        # Data: subjects</span>
<span class="st">        beta0 ~ dnorm(400, 0.001)</span>
<span class="st">        beta1 ~ dnorm(0, 10000)</span>
<span class="st">        beta2[1] &lt;- 0 </span>
<span class="st">        beta2[2] ~ dnorm(0, 0.04)</span>
<span class="st">        beta2[3] ~ dnorm(-10, 0.04)</span>
<span class="st">        beta2[4] ~ dnorm(-15, 0.01)</span>
<span class="st">        beta3 ~ dnorm(-0.3, 100)</span>
<span class="st">        beta4 ~ dnorm(36, 10)</span>

<span class="st">}&quot;</span>

<span class="co"># COMPILE</span>

y &lt;-<span class="st"> </span>full_LiberalArts<span class="op">$</span>Y2018

model_data8 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(y, <span class="dt">x1 =</span> full_LiberalArts<span class="op">$</span>UGDS_<span class="dv">1617</span>, <span class="dt">z =</span> full_LiberalArts<span class="op">$</span>LOCALE_collapse_lac1, <span class="dt">x3 =</span> full_LiberalArts<span class="op">$</span>SAT_AVG_<span class="dv">1617</span>, <span class="dt">x4 =</span> full_LiberalArts<span class="op">$</span>ADM_RATE_<span class="dv">1617</span>))

model_data8 &lt;-<span class="st"> </span><span class="kw">na.omit</span>(model_data8)

liberal_jags_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">jags.model</span>(<span class="kw">textConnection</span>(liberal_model_<span class="dv">3</span>), 
    <span class="dt">data =</span> <span class="kw">list</span>(<span class="dt">y =</span> model_data8<span class="op">$</span>y, <span class="dt">x1 =</span> model_data8<span class="op">$</span>x1, <span class="dt">z =</span> <span class="kw">factor</span>(model_data8<span class="op">$</span>z), <span class="dt">x3 =</span> model_data8<span class="op">$</span>x3, <span class="dt">x4 =</span> model_data8<span class="op">$</span>x4),
    <span class="dt">inits=</span><span class="kw">list</span>(<span class="dt">.RNG.name =</span> <span class="st">&quot;base::Wichmann-Hill&quot;</span>, <span class="dt">.RNG.seed =</span> <span class="dv">454</span>))</code></pre></div>
<pre><code>## Compiling model graph
##    Resolving undeclared variables
##    Allocating nodes
## Graph information:
##    Observed stochastic nodes: 101
##    Unobserved stochastic nodes: 7
##    Total graph size: 914
## 
## Initializing model</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># SIMULATE the model</span>
liberal_sim_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">coda.samples</span>(liberal_jags_<span class="dv">3</span>,
    <span class="dt">variable.names =</span> <span class="kw">c</span>(<span class="st">&quot;beta0&quot;</span>,<span class="st">&quot;beta1&quot;</span>,<span class="st">&quot;beta2&quot;</span>,<span class="st">&quot;beta3&quot;</span>,<span class="st">&quot;beta4&quot;</span>),
    <span class="dt">n.iter =</span> <span class="dv">10000</span>)

<span class="co"># STORE the chains in a data frame</span>
liberal_chains_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(liberal_sim_<span class="dv">3</span>[[<span class="dv">1</span>]])</code></pre></div>
</div>
<div id="model-summary-6" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Model summary</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(liberal_sim_<span class="dv">3</span>)</code></pre></div>
<pre><code>## 
## Iterations = 1001:11000
## Thinning interval = 1 
## Number of chains = 1 
## Sample size per chain = 10000 
## 
## 1. Empirical mean and standard deviation for each variable,
##    plus standard error of the mean:
## 
##               Mean        SD  Naive SE Time-series SE
## beta0     74.38640 103.09083 1.0309083       78.31366
## beta1     -0.03557   0.03833 0.0003833        0.01516
## beta2[1]   0.00000   0.00000 0.0000000        0.00000
## beta2[2] -14.90350  18.97564 0.1897564       10.65495
## beta2[3] -20.88232  29.15071 0.2915071       16.97435
## beta2[4] -21.62275  77.35599 0.7735599       27.81869
## beta3     -0.31836   0.92241 0.0092241        0.61246
## beta4      0.04529   0.67778 0.0067778        0.19837
## 
## 2. Quantiles for each variable:
## 
##               2.5%       25%      50%        75%      97.5%
## beta0       5.6517  10.00698 13.11601 115.120847 331.014032
## beta1      -0.1284  -0.05997 -0.01725  -0.008798   0.002884
## beta2[1]    0.0000   0.00000  0.00000   0.000000   0.000000
## beta2[2]  -78.9900 -17.89649 -5.96357  -4.639963  -2.698728
## beta2[3] -106.1133 -27.83840 -5.37608  -3.785040  -1.903568
## beta2[4] -353.2195 -10.75260  2.82405   5.445096   9.532110
## beta3      -2.7985  -0.69761  0.21967   0.256422   0.306513
## beta4      -0.8088  -0.17489  0.09677   0.117162   2.338836</code></pre>
</div>
<div id="posterior-inference-6" class="section level3">
<h3><span class="header-section-number">9.2.4</span> Posterior inference</h3>
<p>For an unknown liberal arts college in a rural setting with 2000 undergraduates, student mean SAT score of 1400 and an admission rate of <span class="math inline">\(35\%\)</span> (e.g. Hvictor College), we could predict its ranking from our rjags simulation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">liberal_chains_<span class="dv">3</span> &lt;-<span class="st"> </span>liberal_chains_<span class="dv">3</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ranking_new =</span> <span class="kw">rpois</span>(<span class="dv">10000</span>, <span class="dt">lambda =</span> (beta0 <span class="op">+</span><span class="st"> </span>beta1 <span class="op">*</span><span class="st"> </span><span class="dv">2000</span> <span class="op">+</span><span class="st"> </span>beta2.<span class="dv">4</span>. <span class="op">+</span><span class="st"> </span>beta3 <span class="op">*</span><span class="st"> </span><span class="dv">1400</span> <span class="op">+</span><span class="st"> </span>beta4 <span class="op">*</span><span class="st"> </span><span class="fl">0.35</span>)))

liberal_chains_<span class="dv">3</span> <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="kw">quantile</span>(ranking_new,<span class="fl">0.025</span>),<span class="kw">quantile</span>(ranking_new,<span class="fl">0.975</span>))</code></pre></div>
<p>The interval also truly reflects the intuitive estimate of Hvictor College’s ranking!</p>
</div>
</div>
<div id="comparison" class="section level2">
<h2><span class="header-section-number">9.3</span> Comparison</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bayes-model-part-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="a-little-shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
